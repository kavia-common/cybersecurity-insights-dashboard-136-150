{"is_source_file": true, "format": "JavaScript", "description": "This file defines a central API utility module for a React frontend application. It handles communication with a FastAPI backend, including authentication, user info, analytics, threats, notifications, widgets, settings, and search functionalities. It exports functions to perform fetch requests, handle authentication tokens, and establish WebSocket connections for notifications.", "external_files": ["fetch (built-in browser API)", "URLSearchParams (built-in browser API)", "WebSocket (built-in browser API)"], "external_methods": ["fetch", "WebSocket"], "published": ["setAccessToken", "apiFetch", "login", "register", "getCurrentUser", "fetchAnalytics", "fetchThreats", "fetchNotifications", "markNotificationsRead", "fetchWidgetData", "fetchSettings", "updateSettings", "search", "connectNotificationsWS"], "classes": [], "methods": [{"name": "setAccessToken(token)", "description": "Sets the JWT access token used for authenticated API requests.", "scope": "", "scopeKind": ""}, {"name": "apiFetch(path, { method = \"GET\", body = null, form = false } = {})", "description": "A wrapper around the fetch API that manages headers, error handling, and request options for different endpoints.", "scope": "", "scopeKind": ""}, {"name": "login(username, password)", "description": "Performs user authentication by sending username and password, then stores access token.", "scope": "", "scopeKind": ""}, {"name": "register(email, password)", "description": "Registers a new user with email and password.", "scope": "", "scopeKind": ""}, {"name": "getCurrentUser()", "description": "Fetches information about the currently authenticated user.", "scope": "", "scopeKind": ""}, {"name": "fetchAnalytics(query)", "description": "Queries analytics data from the backend.", "scope": "", "scopeKind": ""}, {"name": "fetchThreats(query)", "description": "Requests threat data from the backend.", "scope": "", "scopeKind": ""}, {"name": "fetchNotifications()", "description": "Retrieves notifications for the user.", "scope": "", "scopeKind": ""}, {"name": "markNotificationsRead(ids)", "description": "Marks specified notifications as read.", "scope": "", "scopeKind": ""}, {"name": "fetchWidgetData(widgetType, params = {})", "description": "Fetches data for particular UI widgets.", "scope": "", "scopeKind": ""}, {"name": "fetchSettings()", "description": "Retrieves user or app settings.", "scope": "", "scopeKind": ""}, {"name": "updateSettings(settings)", "description": "Updates user or app settings.", "scope": "", "scopeKind": ""}, {"name": "search(queryObj)", "description": "Performs a search query.", "scope": "", "scopeKind": ""}, {"name": "connectNotificationsWS(onMessage)", "description": "Establishes a WebSocket connection for real-time notifications, handling incoming messages.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "new URLSearchParams", "new WebSocket", "JSON.parse", "JSON.stringify"], "search-terms": ["API_BASE", "auth token", "WebSocket notifications", "React frontend API", "FastAPI backend API", "auth token handling", "fetch wrapper"], "state": 2, "file_id": 13, "knowledge_revision": 54, "git_revision": "31c5cdc13bfe39c7ca1414dcbde4bb955012f1d8", "revision_history": [{"27": ""}, {"54": "31c5cdc13bfe39c7ca1414dcbde4bb955012f1d8"}], "ctags": [{"_type": "tag", "name": "API_BASE", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^const API_BASE = process.env.REACT_APP_API_BASE || \"http:\\/\\/localhost:3001\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "accessToken", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^let accessToken = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "apiFetch", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^export async function apiFetch(path, { method = \"GET\", body = null, form = false } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, { method = \"GET\", body = null, form = false } = {})"}, {"_type": "tag", "name": "connectNotificationsWS", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^export function connectNotificationsWS(onMessage) {$/", "language": "JavaScript", "kind": "function", "signature": "(onMessage)"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^      err = { message: \"Unknown error\" };$/", "language": "JavaScript", "kind": "class", "scope": "apiFetch", "scopeKind": "class"}, {"_type": "tag", "name": "fetchAnalytics", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^export async function fetchAnalytics(query) {$/", "language": "JavaScript", "kind": "function", "signature": "(query)"}, {"_type": "tag", "name": "fetchNotifications", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^export async function fetchNotifications() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fetchSettings", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^export async function fetchSettings() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fetchThreats", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^export async function fetchThreats(query) {$/", "language": "JavaScript", "kind": "function", "signature": "(query)"}, {"_type": "tag", "name": "fetchWidgetData", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^export async function fetchWidgetData(widgetType, params = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(widgetType, params = {})"}, {"_type": "tag", "name": "getCurrentUser", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^export async function getCurrentUser() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^export async function login(username, password) {$/", "language": "JavaScript", "kind": "function", "signature": "(username, password)"}, {"_type": "tag", "name": "markNotificationsRead", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^export async function markNotificationsRead(ids) {$/", "language": "JavaScript", "kind": "function", "signature": "(ids)"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^      err = { message: \"Unknown error\" };$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.err", "scopeKind": "class"}, {"_type": "tag", "name": "method", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^    method,$/", "language": "JavaScript", "kind": "field", "scope": "apiFetch.opts", "scopeKind": "class"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^export async function register(email, password) {$/", "language": "JavaScript", "kind": "function", "signature": "(email, password)"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^export async function search(queryObj) {$/", "language": "JavaScript", "kind": "function", "signature": "(queryObj)"}, {"_type": "tag", "name": "setAccessToken", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^export function setAccessToken(token) {$/", "language": "JavaScript", "kind": "function", "signature": "(token)"}, {"_type": "tag", "name": "updateSettings", "path": "/home/kavia/workspace/code-generation/cybersecurity-insights-dashboard-136-150/cybersecurity_dashboard_frontend/src/api.js", "pattern": "/^export async function updateSettings(settings) {$/", "language": "JavaScript", "kind": "function", "signature": "(settings)"}], "hash": "ba50ec461a885fa2349e7a4ea4faedc3", "format-version": 4, "code-base-name": "cybersecurity_dashboard_frontend", "filename": "cybersecurity_dashboard_frontend/src/api.js", "fields": [{"name": "let accessToken = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "err = { message: \"Unknown error\" };", "scope": "apiFetch.err", "scopeKind": "class", "description": "unavailable"}, {"name": "method,", "scope": "apiFetch.opts", "scopeKind": "class", "description": "unavailable"}]}